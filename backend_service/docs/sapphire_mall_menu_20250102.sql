-- =============================================
-- 角色菜单数据补充
-- 基于admin.js中的菜单配置，在现有sys_category表中添加后台菜单数据
-- 创建时间: 2025-01-02
-- =============================================

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for sys_role_category
-- ----------------------------
DROP TABLE IF EXISTS `sys_role_category`;
CREATE TABLE `sys_role_category` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `role_id` bigint NOT NULL DEFAULT '0' COMMENT '角色ID',
  `role_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '角色编码',
  `category_id` bigint NOT NULL DEFAULT '0' COMMENT '菜单分类ID',
  `category_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '菜单分类编码',
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` int DEFAULT '0' COMMENT '是否删除',
  `creator` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '创建者',
  `updator` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '更新者',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_role_category` (`role_id`, `category_id`),
  KEY `idx_role_code` (`role_code`),
  KEY `idx_category_code` (`category_code`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='角色菜单分类关联表';

-- ----------------------------
-- Records of sys_category (后台菜单数据)
-- ----------------------------
BEGIN;
-- 在现有sys_category表中添加后台菜单数据 (menu_type=1)
INSERT INTO `sys_category` (`id`, `code`, `name`, `parent_id`, `parent_code`, `level`, `sort`, `status`, `icon`, `menu_type`, `path`, `component`, `is_external`, `external_url`, `created_at`, `updated_at`, `is_deleted`, `creator`, `updator`) VALUES 
-- 超级管理员菜单
-- 平台管理
(201, 'M001', '平台管理', 0, '', 1, 1, 1, 'fas fa-cogs', 1, '/platform', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(202, 'M001001', '平台概览', 201, 'M001', 2, 1, 1, 'fas fa-chart-pie', 1, '/platform/dashboard', 'dashboard.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(203, 'M001002', '用户管理', 201, 'M001', 2, 2, 1, 'fas fa-users', 1, '/platform/users', 'user-management.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(204, 'M001003', '商家管理', 201, 'M001', 2, 3, 1, 'fas fa-store', 1, '/platform/merchants', 'merchant-manage.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(205, 'M001004', '订单管理', 201, 'M001', 2, 4, 1, 'fas fa-shopping-bag', 1, '/platform/orders', 'admin-orders.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

-- 合约管理
(206, 'M002', '合约管理', 0, '', 1, 2, 1, 'fas fa-file-contract', 1, '/contract', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(207, 'M002001', '智能合约', 206, 'M002', 2, 1, 1, 'fas fa-code', 1, '/contract/smart', 'smart-contracts.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(208, 'M002002', '交易监控', 206, 'M002', 2, 2, 1, 'fas fa-chart-line', 1, '/contract/monitor', 'transaction-monitor.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

-- 系统管理
(209, 'M003', '系统管理', 0, '', 1, 3, 1, 'fas fa-server', 1, '/system', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(210, 'M003001', '系统设置', 209, 'M003', 2, 1, 1, 'fas fa-cog', 1, '/system/settings', 'system-settings.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(211, 'M003002', '日志管理', 209, 'M003', 2, 2, 1, 'fas fa-file-alt', 1, '/system/logs', 'logs.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

-- DAO治理
(212, 'M004', 'DAO治理', 0, '', 1, 4, 1, 'fas fa-vote-yea', 1, '/dao', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(213, 'M004001', '治理监控', 212, 'M004', 2, 1, 1, 'fas fa-chart-pie', 1, '/dao/monitor', 'governance-monitor.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(214, 'M004002', '提案管理', 212, 'M004', 2, 2, 1, 'fas fa-clipboard-list', 1, '/dao/proposals', 'admin-proposals.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(215, 'M004003', '治理配置', 212, 'M004', 2, 3, 1, 'fas fa-sliders-h', 1, '/dao/config', 'governance-config.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(216, 'M004004', '权限管理', 212, 'M004', 2, 4, 1, 'fas fa-user-shield', 1, '/dao/permissions', 'permission-management.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(217, 'M004005', '系统治理', 212, 'M004', 2, 5, 1, 'fas fa-tools', 1, '/dao/system', 'system-governance.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

-- 普通用户菜单
(218, 'U001', '个人中心', 0, '', 1, 1, 1, 'fas fa-user', 1, '/personal', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(219, 'U001001', '个人信息', 218, 'U001', 2, 1, 1, 'fas fa-id-card', 1, '/personal/profile', 'profile.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(220, 'U001002', '安全设置', 218, 'U001', 2, 2, 1, 'fas fa-shield-alt', 1, '/personal/security', 'security.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(221, 'U001003', '通知设置', 218, 'U001', 2, 3, 1, 'fas fa-bell', 1, '/personal/notifications', 'notifications.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

(222, 'U002', '我的资产', 0, '', 1, 2, 1, 'fas fa-wallet', 1, '/assets', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(223, 'U002001', '账户余额', 222, 'U002', 2, 1, 1, 'fas fa-coins', 1, '/assets/balance', 'balance.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(224, 'U002002', '质押管理', 222, 'U002', 2, 2, 1, 'fas fa-piggy-bank', 1, '/assets/staking', 'staking.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(225, 'U002003', '交易记录', 222, 'U002', 2, 3, 1, 'fas fa-history', 1, '/assets/transactions', 'transactions.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

(226, 'U003', '交易管理', 0, '', 1, 3, 1, 'fas fa-exchange-alt', 1, '/trading', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(227, 'U003001', '我的订单', 226, 'U003', 2, 1, 1, 'fas fa-shopping-cart', 1, '/trading/orders', 'orders.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(228, 'U003002', '我的收货地址', 226, 'U003', 2, 2, 1, 'fas fa-map-marker-alt', 1, '/trading/addresses', 'addresses.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(229, 'U003003', '退款/售后', 226, 'U003', 2, 3, 1, 'fas fa-undo', 1, '/trading/refunds', 'refunds.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

(230, 'U004', 'DAO治理', 0, '', 1, 4, 1, 'fas fa-vote-yea', 1, '/dao-user', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(231, 'U004001', '治理概览', 230, 'U004', 2, 1, 1, 'fas fa-chart-pie', 1, '/dao-user/overview', 'governance-overview.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(232, 'U004002', '提案管理', 230, 'U004', 2, 2, 1, 'fas fa-clipboard-list', 1, '/dao-user/proposals', 'user-proposals.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(233, 'U004003', '社区参与', 230, 'U004', 2, 3, 1, 'fas fa-lock', 1, '/dao-user/community', 'user-community.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(234, 'U004004', '治理学习', 230, 'U004', 2, 4, 1, 'fas fa-graduation-cap', 1, '/dao-user/learn', 'governance-learn.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),

-- 商家中心菜单
(235, 'B001', '商家中心', 0, '', 1, 5, 1, 'fas fa-store', 1, '/business', '', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(236, 'B001001', '店铺概览', 235, 'B001', 2, 1, 1, 'fas fa-chart-pie', 1, '/business/overview', 'merchant-store-overview.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(237, 'B001002', '商品管理', 235, 'B001', 2, 2, 1, 'fas fa-box', 1, '/business/products', 'product-management.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(238, 'B001003', '订单管理', 235, 'B001', 2, 3, 1, 'fas fa-shopping-bag', 1, '/business/orders', 'merchant-orders.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(239, 'B001004', '评价管理', 235, 'B001', 2, 4, 1, 'fas fa-star', 1, '/business/reviews', 'merchant-reviews.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(240, 'B001005', '交易数据', 235, 'B001', 2, 5, 1, 'fas fa-chart-bar', 1, '/business/data', 'merchant-trade-data.html', 0, '', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin');
COMMIT;

-- ----------------------------
-- Records of sys_role_category
-- ----------------------------
BEGIN;
-- 超级管理员角色菜单关联 (R0001)
INSERT INTO `sys_role_category` (`id`, `role_id`, `role_code`, `category_id`, `category_code`, `created_at`, `updated_at`, `is_deleted`, `creator`, `updator`) VALUES 
(1, 1, 'R0001', 201, 'M001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(2, 1, 'R0001', 202, 'M001001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(3, 1, 'R0001', 203, 'M001002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(4, 1, 'R0001', 204, 'M001003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(5, 1, 'R0001', 205, 'M001004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(6, 1, 'R0001', 206, 'M002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(7, 1, 'R0001', 207, 'M002001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(8, 1, 'R0001', 208, 'M002002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(9, 1, 'R0001', 209, 'M003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(10, 1, 'R0001', 210, 'M003001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(11, 1, 'R0001', 211, 'M003002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(12, 1, 'R0001', 212, 'M004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(13, 1, 'R0001', 213, 'M004001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(14, 1, 'R0001', 214, 'M004002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(15, 1, 'R0001', 215, 'M004003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(16, 1, 'R0001', 216, 'M004004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(17, 1, 'R0001', 217, 'M004005', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin');

-- 系统管理员角色菜单关联 (R0002) - 包含平台管理和部分DAO治理
INSERT INTO `sys_role_category` (`id`, `role_id`, `role_code`, `category_id`, `category_code`, `created_at`, `updated_at`, `is_deleted`, `creator`, `updator`) VALUES 
(18, 2, 'R0002', 201, 'M001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(19, 2, 'R0002', 202, 'M001001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(20, 2, 'R0002', 203, 'M001002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(21, 2, 'R0002', 204, 'M001003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(22, 2, 'R0002', 205, 'M001004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(23, 2, 'R0002', 212, 'M004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(24, 2, 'R0002', 213, 'M004001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(25, 2, 'R0002', 214, 'M004002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin');

-- 普通用户角色菜单关联 (R0003) - 包含个人中心、我的资产、交易管理、DAO治理
INSERT INTO `sys_role_category` (`id`, `role_id`, `role_code`, `category_id`, `category_code`, `created_at`, `updated_at`, `is_deleted`, `creator`, `updator`) VALUES 
(26, 3, 'R0003', 218, 'U001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(27, 3, 'R0003', 219, 'U001001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(28, 3, 'R0003', 220, 'U001002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(29, 3, 'R0003', 221, 'U001003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(30, 3, 'R0003', 222, 'U002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(31, 3, 'R0003', 223, 'U002001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(32, 3, 'R0003', 224, 'U002002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(33, 3, 'R0003', 225, 'U002003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(34, 3, 'R0003', 226, 'U003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(35, 3, 'R0003', 227, 'U003001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(36, 3, 'R0003', 228, 'U003002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(37, 3, 'R0003', 229, 'U003003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(38, 3, 'R0003', 230, 'U004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(39, 3, 'R0003', 231, 'U004001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(40, 3, 'R0003', 232, 'U004002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(41, 3, 'R0003', 233, 'U004003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(42, 3, 'R0003', 234, 'U004004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin');

-- 认证商家角色菜单关联 (继承普通用户 + 商家中心)
INSERT INTO `sys_role_category` (`id`, `role_id`, `role_code`, `category_id`, `category_code`, `created_at`, `updated_at`, `is_deleted`, `creator`, `updator`) VALUES 
-- 继承普通用户所有菜单
(43, 2, 'R0002', 218, 'U001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(44, 2, 'R0002', 219, 'U001001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(45, 2, 'R0002', 220, 'U001002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(46, 2, 'R0002', 221, 'U001003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(47, 2, 'R0002', 222, 'U002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(48, 2, 'R0002', 223, 'U002001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(49, 2, 'R0002', 224, 'U002002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(50, 2, 'R0002', 225, 'U002003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(51, 2, 'R0002', 226, 'U003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(52, 2, 'R0002', 227, 'U003001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(53, 2, 'R0002', 228, 'U003002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(54, 2, 'R0002', 229, 'U003003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(55, 2, 'R0002', 230, 'U004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(56, 2, 'R0002', 231, 'U004001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(57, 2, 'R0002', 232, 'U004002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(58, 2, 'R0002', 233, 'U004003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(59, 2, 'R0002', 234, 'U004004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
-- 添加商家中心菜单
(60, 2, 'R0002', 235, 'B001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(61, 2, 'R0002', 236, 'B001001', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(62, 2, 'R0002', 237, 'B001002', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(63, 2, 'R0002', 238, 'B001003', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(64, 2, 'R0002', 239, 'B001004', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin'),
(65, 2, 'R0002', 240, 'B001005', '2025-01-02 10:00:00', '2025-01-02 10:00:00', 0, 'admin', 'admin');
COMMIT;

SET FOREIGN_KEY_CHECKS = 1;
