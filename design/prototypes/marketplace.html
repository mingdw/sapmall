<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»£å¸å•†åŸ - Sapphire Mall</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            margin: 0;
            padding: 0;
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* æ·±è‰²ä¸»é¢˜çš„å•†å“å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .product-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(55, 65, 81, 0.8);
            backdrop-filter: blur(10px);
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            background: rgba(75, 85, 99, 0.9);
        }
        /* ä»·æ ¼é«˜äº®åŠ¨ç”» */
        .price-highlight {
            position: relative;
        }
        .price-highlight::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transition: width 0.3s ease;
        }
        .product-card:hover .price-highlight::after {
            width: 100%;
        }
        /* æ·±è‰²ä¸»é¢˜æŒ‰é’®æ ·å¼ */
        .modern-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: none;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.4);
        }
        .modern-btn:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            box-shadow: 0 8px 15px -3px rgba(59, 130, 246, 0.5);
        }
        /* ç­›é€‰åŒºåŸŸæ ·å¼ */
        .filter-section {
            background: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.5);
        }
        .filter-section:hover {
            border-color: rgba(99, 102, 241, 0.5);
        }
        /* å•†å“åˆ†ç±»ç­›é€‰åŒºåŸŸ */
        .category-filter-section {
            padding-bottom: 1.5rem;
        }
        
        /* ä¸»åˆ†ç±»æ ‡ç­¾æ ·å¼ */
        .category-main-tab {
            padding: 0.625rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.25;
            transition: all 0.2s ease;
            background-color: rgba(55, 65, 81, 0.6);
            color: #d1d5db;
            border: 1px solid rgba(75, 85, 99, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .category-main-tab:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            color: #93c5fd;
        }
        .category-main-tab.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        
        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            min-width: 240px;
            max-width: 280px;
        }
        .search-input {
            width: 100%;
            padding: 0.5rem 2.5rem 0.5rem 0.875rem;
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.6);
            border-radius: 0.5rem;
            color: #f9fafb;
            font-size: 0.8125rem;
            outline: none;
            transition: all 0.2s ease;
            height: 2.25rem; /* ä¸å…¶ä»–æŒ‰é’®é«˜åº¦ä¿æŒä¸€è‡´ */
        }
        .search-input:focus {
            border-color: rgba(59, 130, 246, 0.8);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        .search-input::placeholder {
            color: #9ca3af;
            font-size: 0.8125rem;
        }
        .search-button {
            position: absolute;
            right: 0.375rem;
            top: 50%;
            transform: translateY(-50%);
            padding: 0.375rem;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: none;
            border-radius: 0.25rem;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 1.75rem;
            height: 1.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .search-button:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            transform: translateY(-50%) scale(1.05);
        }
        .search-button i {
            font-size: 0.75rem;
        }
        
        /* åˆ†å‰²çº¿ */
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(75, 85, 99, 0.6) 50%, transparent 100%);
            margin: 1.5rem 0;
        }
        /* ç»Ÿä¸€çš„ç­›é€‰é¡¹æ ·å¼ */
        .filter-row {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .filter-row-header {
            display: flex;
            align-items: center;
            min-height: 3rem;
            overflow: visible;
        }
        .filter-label {
            width: 80px;
            font-size: 0.875rem; /* 14px */
            font-weight: 500;
            color: #9ca3af; /* text-gray-400 */
            flex-shrink: 0;
            line-height: 1.5;
        }
        .filter-content {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: visible;
        }
        .filter-items-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            overflow: visible;
            position: relative;
        }
        .filter-items-visible {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap; /* æ”¹ä¸ºå…è®¸æ¢è¡Œ */
            overflow: visible; /* æ”¹ä¸ºå¯è§ */
            flex: 1;
        }
        .filter-items-hidden {
            display: none;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding-top: 0.5rem;
            width: 100%;
            margin-left: 80px; /* ä¸ç­›é€‰æŒ‰é’®å¯¹é½ï¼Œç­‰äº.filter-labelçš„å®½åº¦ */
        }
        .filter-items-hidden.show {
            display: flex;
        }
        
        /* åˆ†ç±»é€‰æ‹©æŒ‰é’®æ ·å¼ - å•é€‰ï¼Œæ›´çªå‡º */
        .category-tab {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.25;
            height: 2.25rem;
            transition: all 0.2s ease;
            background-color: rgba(75, 85, 99, 0.5);
            color: #d1d5db;
            border: 1px solid rgba(75, 85, 99, 1);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.375rem;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .category-tab:hover {
            background-color: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.4);
            color: #93c5fd;
            transform: translateY(-1px);
        }
        .category-tab.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            transform: translateY(-1px);
        }
        
        /* ä»·æ ¼ç­›é€‰æŒ‰é’®æ ·å¼ - å¤šé€‰ï¼Œæ ‡ç­¾é£æ ¼ */
        .price-tag {
            padding: 0.375rem 0.875rem;
            border-radius: 1.5rem; /* æ›´åœ†æ¶¦çš„è¾¹è§’ */
            font-size: 0.8125rem;
            font-weight: 500;
            line-height: 1.25;
            height: 2rem; /* ç¨å¾®çŸ®ä¸€ç‚¹ */
            transition: all 0.2s ease;
            background-color: rgba(99, 102, 241, 0.1);
            color: #a5b4fc;
            border: 1px solid rgba(99, 102, 241, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .price-tag:hover {
            background-color: rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.5);
            color: #c7d2fe;
            transform: scale(1.05);
        }
        .price-tag.active {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
            border-color: #6366f1;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }
        
        /* çŠ¶æ€ç­›é€‰æŒ‰é’®æ ·å¼ - å¤šé€‰ï¼Œå¾½ç« é£æ ¼ */
        .status-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 0.75rem;
            font-size: 0.8125rem;
            font-weight: 500;
            line-height: 1.25;
            height: 2rem;
            transition: all 0.2s ease;
            background-color: rgba(16, 185, 129, 0.1);
            color: #6ee7b7;
            border: 1px solid rgba(16, 185, 129, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .status-badge:hover {
            background-color: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.5);
            color: #a7f3d0;
            transform: scale(1.05);
        }
        .status-badge.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        /* é€šç”¨ç­›é€‰æŒ‰é’® - ä¿ç•™ä½œä¸ºåå¤‡ */
        .filter-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.25;
            height: 2.25rem;
            transition: all 0.2s ease;
            background-color: rgba(75, 85, 99, 0.5);
            color: #d1d5db;
            border: 1px solid rgba(75, 85, 99, 1);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.375rem;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .filter-btn:hover {
            background-color: rgba(99, 102, 241, 0.8);
            color: white;
            transform: translateY(-1px);
        }
        .filter-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        /* æ›´å¤šæŒ‰é’®æ ·å¼ */
        .toggle-more-btn {
            padding: 0.375rem 0.625rem;
            height: 2rem;
            font-size: 0.8125rem;
            font-weight: 400;
            color: #9ca3af;
            background: transparent;
            border: 1px solid rgba(156, 163, 175, 0.3);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: none;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
            flex-shrink: 0;
            margin-left: 0.5rem;
        }
        .toggle-more-btn:hover {
            color: #60a5fa;
            border-color: rgba(96, 165, 250, 0.5);
            background: rgba(96, 165, 250, 0.05);
        }
        .toggle-more-btn.show {
            display: flex;
        }
        /* æ¸…é™¤æŒ‰é’®æ ·å¼ */
        .clear-btn {
            padding: 0.5rem 1rem;
            height: 2.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #9ca3af;
            background: rgba(75, 85, 99, 0.3);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.375rem;
            white-space: nowrap;
            flex-shrink: 0;
            margin-left: 1rem;
        }
        .clear-btn:hover {
            color: #60a5fa;
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }
        /* åˆ†ç±»å¡ç‰‡æ ·å¼ */
        .category-card {
            background: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(75, 85, 99, 0.4);
            border-radius: 1.5rem;
            padding: 2rem;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        .category-card:hover {
            border-color: rgba(99, 102, 241, 0.6);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.3);
        }
        
        /* åˆ†ç±»æ ‡é¢˜åŒºåŸŸ */
        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }
        
        .category-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .category-icon {
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .category-text {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .category-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #f9fafb;
            margin: 0;
        }
        
        .category-count {
            padding: 0.25rem 0.75rem;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 1rem;
            font-size: 0.8125rem;
            font-weight: 600;
            color: #93c5fd;
        }
        
        .category-view-more {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .category-view-more:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px -4px rgba(59, 130, 246, 0.4);
        }
        
        /* å•†å“ç½‘æ ¼å®¹å™¨ */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            min-height: 300px; /* ç¡®ä¿æœ€å°é«˜åº¦ */
        }
        
        /* å°å‹å•†å“å¡ç‰‡æ ·å¼ */
        .mini-product-card {
            background: rgba(55, 65, 81, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 1rem;
            padding: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            height: 280px; /* ç»Ÿä¸€é«˜åº¦ */
            display: flex;
            flex-direction: column;
        }
        .mini-product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        .mini-product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.4);
            border-color: rgba(99, 102, 241, 0.6);
        }
        .mini-product-card:hover::before {
            opacity: 1;
        }
        
        /* å•†å“å›¾ç‰‡å®¹å™¨ */
        .product-image-wrapper {
            position: relative;
            width: 100%;
            height: 160px;
            border-radius: 0.75rem;
            overflow: hidden;
            margin-bottom: 1rem;
            background: rgba(75, 85, 99, 0.3);
        }
        
        /* å•†å“å›¾ç‰‡ */
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.3s ease;
        }
        .mini-product-card:hover .product-image {
            transform: scale(1.05);
        }
        
        /* å•†å“æ ‡ç­¾ */
        .product-badge {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            padding: 0.25rem 0.625rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* å•†å“ä¿¡æ¯åŒºåŸŸ */
        .product-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        /* å•†å“æ ‡é¢˜ */
        .product-title {
            font-size: 0.9375rem;
            font-weight: 600;
            color: #f9fafb;
            line-height: 1.4;
            margin-bottom: 0.75rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* å•†å“ä»·æ ¼å’Œè¯„åˆ†åŒºåŸŸ */
        .product-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
        }
        
        /* å•†å“ä»·æ ¼ */
        .product-price {
            font-size: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* å•†å“è¯„åˆ† */
        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.8125rem;
            color: #9ca3af;
        }
        .product-rating .star {
            color: #fbbf24;
        }
        /* ä¸‹æ‹‰èœå•æ ·å¼ */
        .category-dropdown {
            position: relative;
        }
        
        /* æ·»åŠ hoveræ•ˆæœ */
        .category-dropdown:hover .dropdown-menu {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateY(0) !important;
        }
        
        /* hoveræ—¶ç®­å¤´æ—‹è½¬æ•ˆæœ */
        .category-dropdown:hover .category-tab i[id$="-arrow"] {
            transform: rotate(180deg);
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 200px;
            background: rgba(31, 41, 55, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(75, 85, 99, 0.8);
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 999;
            margin-top: 0.5rem;
        }
        .dropdown-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .dropdown-item {
            padding: 0.75rem 1rem;
            color: #d1d5db;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(75, 85, 99, 0.3);
            cursor: pointer;
            font-size: 0.875rem;
        }
        .dropdown-item:hover {
            background: rgba(99, 102, 241, 0.2);
            color: white;
        }
        .dropdown-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <div class="w-full px-4 py-2">
        
        <!-- é«˜çº§ç­›é€‰åŒºåŸŸ -->
        <div class="filter-section rounded-2xl p-6 mb-6">
            <!-- ç­›é€‰é€‰é¡¹åŒºåŸŸ -->
            <div class="space-y-4">
                <!-- å•†å“åˆ†ç±»ç­›é€‰ -->
                <div class="filter-row">
                    <div class="filter-row-header">
                        <span class="filter-label" data-en="Category">å•†å“åˆ†ç±»</span>
                        <div class="filter-content">
                            <div class="filter-items-container" id="categoryContainer">
                                <div class="filter-items-visible" id="categoryVisible">
                                    <div class="category-dropdown">
                                        <button class="category-tab active" data-category="all" onclick="selectCategory('all')">
                                            <span data-en="All Categories">å…¨éƒ¨åˆ†ç±»</span>
                                            <span class="text-xs opacity-75">(12,345)</span>
                                        </button>
                                    </div>
                                    
                                    <div class="category-dropdown">
                                        <button class="category-tab" data-category="gaming">
                                            <span data-en="Gaming">æ¸¸æˆé“å…·</span>
                                            <span class="text-xs opacity-75">(8,567)</span>
                                            <i class="fas fa-chevron-down text-xs transition-transform" id="gaming-arrow"></i>
                                        </button>
                                        <div class="dropdown-menu" id="gaming-dropdown">
                                            <div class="dropdown-item" onclick="selectSubcategory('gaming', 'skins')">
                                                <span data-en="Character Skins">è§’è‰²çš®è‚¤</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('gaming', 'weapons')">
                                                <span data-en="Weapon Skins">æ­¦å™¨çš®è‚¤</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('gaming', 'pets')">
                                                <span data-en="Virtual Pets">è™šæ‹Ÿå® ç‰©</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('gaming', 'mounts')">
                                                <span data-en="Mounts">åéª‘</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('gaming', 'currency')">
                                                <span data-en="Game Currency">æ¸¸æˆå¸</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="category-dropdown">
                                        <button class="category-tab" data-category="art">
                                            <span data-en="Digital Art">æ•°å­—è‰ºæœ¯</span>
                                            <span class="text-xs opacity-75">(3,421)</span>
                                            <i class="fas fa-chevron-down text-xs transition-transform" id="art-arrow"></i>
                                        </button>
                                        <div class="dropdown-menu" id="art-dropdown">
                                            <div class="dropdown-item" onclick="selectSubcategory('art', 'paintings')">
                                                <span data-en="Digital Paintings">æ•°å­—ç»˜ç”»</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('art', 'photography')">
                                                <span data-en="Photography">æ‘„å½±ä½œå“</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('art', '3d-art')">
                                                <span data-en="3D Art">3Dè‰ºæœ¯</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('art', 'generative')">
                                                <span data-en="Generative Art">ç”Ÿæˆè‰ºæœ¯</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('art', 'pixel-art')">
                                                <span data-en="Pixel Art">åƒç´ è‰ºæœ¯</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="category-dropdown">
                                        <button class="category-tab" data-category="metaverse">
                                            <span data-en="Metaverse">è™šæ‹Ÿä¸–ç•Œ</span>
                                            <span class="text-xs opacity-75">(2,156)</span>
                                            <i class="fas fa-chevron-down text-xs transition-transform" id="metaverse-arrow"></i>
                                        </button>
                                        <div class="dropdown-menu" id="metaverse-dropdown">
                                            <div class="dropdown-item" onclick="selectSubcategory('metaverse', 'land')">
                                                <span data-en="Virtual Land">è™šæ‹ŸåœŸåœ°</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('metaverse', 'buildings')">
                                                <span data-en="Buildings">å»ºç­‘ç‰©</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('metaverse', 'avatars')">
                                                <span data-en="Avatars">è™šæ‹Ÿå½¢è±¡</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('metaverse', 'wearables')">
                                                <span data-en="Wearables">å¯ç©¿æˆ´ç‰©å“</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('metaverse', 'experiences')">
                                                <span data-en="Experiences">ä½“éªŒåœºæ™¯</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="category-dropdown">
                                        <button class="category-tab" data-category="content">
                                            <span data-en="Digital Content">æ•°å­—å†…å®¹</span>
                                            <span class="text-xs opacity-75">(5,432)</span>
                                            <i class="fas fa-chevron-down text-xs transition-transform" id="content-arrow"></i>
                                        </button>
                                        <div class="dropdown-menu" id="content-dropdown">
                                            <div class="dropdown-item" onclick="selectSubcategory('content', 'music')">
                                                <span data-en="Music">éŸ³ä¹</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('content', 'videos')">
                                                <span data-en="Videos">è§†é¢‘</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('content', 'ebooks')">
                                                <span data-en="E-books">ç”µå­ä¹¦</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('content', 'courses')">
                                                <span data-en="Courses">è¯¾ç¨‹</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('content', 'software')">
                                                <span data-en="Software">è½¯ä»¶</span>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                            <button class="toggle-more-btn" id="categoryToggleBtn" onclick="toggleMoreCategories()">
                                <span id="categoryToggleText">æ›´å¤š</span>
                                <i class="fas fa-chevron-down text-xs transition-transform" id="categoryToggleArrow"></i>
                            </button>
                            
                            <!-- æœç´¢æ¡† - æ·»åŠ åœ¨æŠ˜å æŒ‰é’®å -->
                            <div class="search-container ml-4">
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        placeholder="è¯·è¾“å…¥å•†å“åç§°" 
                                        class="search-input"
                                        id="productSearchInput"
                                    >
                                    <button class="search-button" onclick="performSearch()">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ†ç±»æŠ˜å å†…å®¹ - æ˜¾ç¤ºåœ¨ä¸‹ä¸€è¡Œ -->
                    <div class="filter-items-hidden" id="categoryHidden">
                                    <div class="category-dropdown">
                                        <button class="category-tab" data-category="collectibles" onclick="toggleDropdown('collectibles')">
                                            <span data-en="Collectibles">æ”¶è—å“</span>
                                            <span class="text-xs opacity-75">(1,987)</span>
                                            <i class="fas fa-chevron-down text-xs transition-transform" id="collectibles-arrow"></i>
                                        </button>
                                        <div class="dropdown-menu" id="collectibles-dropdown">
                                            <div class="dropdown-item" onclick="selectSubcategory('collectibles', 'trading-cards')">
                                                <span data-en="Trading Cards">äº¤æ˜“å¡ç‰Œ</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('collectibles', 'limited-editions')">
                                                <span data-en="Limited Editions">é™é‡ç‰ˆ</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('collectibles', 'rare-items')">
                                                <span data-en="Rare Items">ç¨€æœ‰ç‰©å“</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('collectibles', 'vintage')">
                                                <span data-en="Vintage">å¤å¤</span>
                                            </div>
                                            <div class="dropdown-item" onclick="selectSubcategory('collectibles', 'autographs')">
                                                <span data-en="Autographs">ç­¾å</span>
                                    </div>
                                </div>
                            </div>
                            
                        <div class="category-dropdown">
                            <button class="category-tab" data-category="services" onclick="selectCategory('services')">
                                <span data-en="Services">æœåŠ¡</span>
                                <span class="text-xs opacity-75">(856)</span>
                            </button>
                        </div>
                        
                        <div class="category-dropdown">
                            <button class="category-tab" data-category="tools" onclick="selectCategory('tools')">
                                <span data-en="Tools">å·¥å…·</span>
                                <span class="text-xs opacity-75">(423)</span>
                            </button>
                        </div>
                        
                        <div class="category-dropdown">
                            <button class="category-tab" data-category="education" onclick="selectCategory('education')">
                                <span data-en="Education">æ•™è‚²</span>
                                <span class="text-xs opacity-75">(299)</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- åˆ†å‰²çº¿ -->
                <div class="divider"></div>

                <!-- ä»·æ ¼èŒƒå›´ç­›é€‰ -->
                <div class="filter-row">
                    <div class="filter-row-header">
                        <span class="filter-label" data-en="Price">ä»·æ ¼</span>
                        <div class="filter-content">
                            <div class="filter-items-container" id="priceContainer">
                                <div class="filter-items-visible" id="priceVisible">
                                    <button class="price-tag" data-filter-type="price" data-value="0-100">0-100 SAP</button>
                                    <button class="price-tag" data-filter-type="price" data-value="100-500">100-500</button>
                                    <button class="price-tag" data-filter-type="price" data-value="500-1000">500-1000</button>
                                    <button class="price-tag" data-filter-type="price" data-value="1000+">1000+</button>
                                </div>
                            </div>
                            
                            <button class="toggle-more-btn" id="priceToggleBtn" onclick="toggleMorePrices()">
                                <span id="priceToggleText">æ›´å¤š</span>
                                <i class="fas fa-chevron-down text-xs transition-transform" id="priceToggleArrow"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- ä»·æ ¼æŠ˜å å†…å®¹ - æ˜¾ç¤ºåœ¨ä¸‹ä¸€è¡Œ -->
                    <div class="filter-items-hidden" id="priceHidden">
                        <button class="price-tag" data-filter-type="price" data-value="2000+">2000+</button>
                        <button class="price-tag" data-filter-type="price" data-value="5000+">5000+</button>
                        <button class="price-tag" data-filter-type="price" data-value="10000+">10000+</button>
                        <button class="price-tag" data-filter-type="price" data-value="custom">è‡ªå®šä¹‰ä»·æ ¼</button>
                    </div>
                </div>

                <!-- ç”¨æˆ·è¯„åˆ†å’ŒçŠ¶æ€ç­›é€‰ -->
                <div class="filter-row">
                    <div class="filter-row-header">
                        <span class="filter-label" data-en="Filters">ç­›é€‰</span>
                        <div class="filter-content">
                            <div class="filter-items-container" id="filterContainer">
                                <div class="filter-items-visible" id="filterVisible">
                                    <button class="status-badge" data-filter-type="rating" data-value="4+">4æ˜Ÿ+ â­</button>
                                    <button class="status-badge" data-filter-type="status" data-value="new">ğŸ†• æ–°å“</button>
                                    <button class="status-badge" data-filter-type="status" data-value="hot">ğŸ”¥ çƒ­é—¨</button>
                                    <button class="status-badge" data-filter-type="status" data-value="limited">ğŸ‘‘ é™é‡</button>
                                </div>
                            </div>
                            
                            <button class="toggle-more-btn" id="filterToggleBtn" onclick="toggleMoreFilters()">
                                <span id="filterToggleText">æ›´å¤š</span>
                                <i class="fas fa-chevron-down text-xs transition-transform" id="filterToggleArrow"></i>
                            </button>
                            
                            <button class="clear-btn" onclick="clearAllFilters()">
                                <i class="fas fa-undo"></i>
                                <span data-en="Clear">æ¸…é™¤</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- ç­›é€‰æŠ˜å å†…å®¹ - æ˜¾ç¤ºåœ¨ä¸‹ä¸€è¡Œ -->
                    <div class="filter-items-hidden" id="filterHidden">
                        <button class="status-badge" data-filter-type="status" data-value="discount">ğŸ’° æŠ˜æ‰£</button>
                        <button class="status-badge" data-filter-type="rating" data-value="5">5æ˜Ÿ â­</button>
                        <button class="status-badge" data-filter-type="status" data-value="verified">âœ… è®¤è¯</button>
                        <button class="status-badge" data-filter-type="status" data-value="trending">ğŸ“ˆ è¶‹åŠ¿</button>
                        <button class="status-badge" data-filter-type="status" data-value="premium">ğŸ’ é«˜çº§</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åˆ†ç±»å•†å“å±•ç¤ºåŒºåŸŸ -->
        <div id="categoryProductsContainer">
            <!-- å…¨éƒ¨åˆ†ç±»è§†å›¾ - é»˜è®¤æ˜¾ç¤º -->
            <div id="allCategoriesView" class="space-y-8">
                
                <!-- æ¸¸æˆé“å…·åˆ†ç±»å¡ç‰‡ -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-info">
                            <span class="category-icon">ğŸ®</span>
                            <div class="category-text">
                                <h3 class="category-title"><span data-en="Gaming Items">æ¸¸æˆé“å…·</span></h3>
                                <span class="category-count"><span data-en="8,567 items">8,567</span></span>
                            </div>
                        </div>
                        <button class="category-view-more" onclick="selectMainCategory('gaming')">
                            <span data-en="View More">æŸ¥çœ‹æ›´å¤š</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- å•†å“ç½‘æ ¼ -->
                    <div class="products-grid">
                        <!-- æ¸¸æˆå•†å“1 -->
                        <div class="mini-product-card" onclick="openProductDetail('ç‹è€…è£è€€é™å®šçš®è‚¤', 'https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=300&h=200&fit=crop&crop=center', '125.50', 'ä¼ è¯´', 'ä¸“å±é™å®šç‰ˆçš®è‚¤', '4.9', '127', 'gaming-skins')">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=300&h=200&fit=crop&crop=center" alt="Gaming Skin" class="product-image">
                                <span class="product-badge bg-purple-500">ä¼ è¯´</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">ç‹è€…è£è€€é™å®šçš®è‚¤</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥125.50</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå•†å“2 -->
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=300&h=200&fit=crop&crop=center" alt="Game Weapon" class="product-image">
                                <span class="product-badge bg-red-500">ğŸ”¥ çƒ­é—¨</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">CS:GOåˆ€å…·çš®è‚¤</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥299.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå•†å“3 -->
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=300&h=200&fit=crop&crop=center" alt="Gaming Character" class="product-image">
                                <span class="product-badge bg-green-500">ç¨€æœ‰</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">è‹±é›„è”ç›Ÿè§’è‰²</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥89.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.7</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå•†å“4 -->
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=300&h=200&fit=crop&crop=center" alt="Game Asset" class="product-image">
                                <span class="product-badge bg-blue-500">å²è¯—</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">é­”å…½ä¸–ç•Œåéª‘</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥456.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ¸¸æˆå•†å“5 -->
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1486401899868-0e435ed85128?w=300&h=200&fit=crop&crop=center" alt="Game Item" class="product-image">
                                <span class="product-badge bg-orange-500">é™é‡</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">ç»åœ°æ±‚ç”Ÿå¥—è£…</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥178.50</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.6</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1511512578047-dfb367046420?w=300&h=200&fit=crop&crop=center" alt="Pet" class="product-image">
                                <span class="product-badge bg-pink-500">å¯çˆ±</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">è™šæ‹Ÿå® ç‰©</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥67.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop&crop=center" alt="Gaming Currency" class="product-image">
                                <span class="product-badge bg-yellow-500">çƒ­é”€</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">æ¸¸æˆé‡‘å¸åŒ…</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥25.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.5</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1614294148960-9aa740632a87?w=300&h=200&fit=crop&crop=center" alt="Gaming Equipment" class="product-image">
                                <span class="product-badge bg-indigo-500">è£…å¤‡</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">è£…å¤‡å¼ºåŒ–çŸ³</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥35.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.4</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ•°å­—è‰ºæœ¯åˆ†ç±»å¡ç‰‡ -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-info">
                            <span class="category-icon">ğŸ¨</span>
                            <div class="category-text">
                                <h3 class="category-title"><span data-en="Digital Art">æ•°å­—è‰ºæœ¯</span></h3>
                                <span class="category-count"><span data-en="3,421 items">3,421</span></span>
                            </div>
                        </div>
                        <button class="category-view-more" onclick="selectMainCategory('art')">
                            <span data-en="View More">æŸ¥çœ‹æ›´å¤š</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- æ•°å­—è‰ºæœ¯å•†å“ç½‘æ ¼ -->
                    <div class="products-grid">
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300&h=200&fit=crop&crop=center" alt="Digital Art" class="product-image">
                                <span class="product-badge bg-purple-500">NFT</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">æŠ½è±¡å‡ ä½•è‰ºæœ¯</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥299.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.7</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=300&h=200&fit=crop&crop=center" alt="3D Art" class="product-image">
                                <span class="product-badge bg-green-500">3D</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">3Dæ•°å­—é›•å¡‘</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥455.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=300&h=200&fit=crop&crop=center" alt="Pixel Art" class="product-image">
                                <span class="product-badge bg-blue-500">åƒç´ </span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">å¤å¤åƒç´ ç”»</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥89.50</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.6</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1549909158-6d277ce8cf8d?w=300&h=200&fit=crop&crop=center" alt="Digital Painting" class="product-image">
                                <span class="product-badge bg-red-500">çƒ­é—¨</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">æ•°å­—æ°´å½©ç”»</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥199.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1596422846543-75c6fc197f07?w=300&h=200&fit=crop&crop=center" alt="Abstract Art" class="product-image">
                                <span class="product-badge bg-orange-500">é™é‡</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">æŠ½è±¡è¡¨è¾¾è‰ºæœ¯</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥399.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.5</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop&crop=center" alt="Vector Art" class="product-image">
                                <span class="product-badge bg-pink-500">çŸ¢é‡</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">çŸ¢é‡æ’ç”»</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥129.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.7</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                <!-- è™šæ‹Ÿä¸–ç•Œåˆ†ç±»å¡ç‰‡ -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-info">
                            <span class="category-icon">ğŸŒ</span>
                            <div class="category-text">
                                <h3 class="category-title"><span data-en="Metaverse">è™šæ‹Ÿä¸–ç•Œ</span></h3>
                                <span class="category-count"><span data-en="2,156 items">2,156</span></span>
                            </div>
                                </div>
                        <button class="category-view-more" onclick="selectMainCategory('metaverse')">
                            <span data-en="View More">æŸ¥çœ‹æ›´å¤š</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- è™šæ‹Ÿä¸–ç•Œå•†å“ç½‘æ ¼ -->
                    <div class="products-grid">
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=300&h=200&fit=crop&crop=center" alt="Virtual Land" class="product-image">
                                <span class="product-badge bg-emerald-500">åœŸåœ°</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">ä¸­å¿ƒåŸåŒºè™šæ‹ŸåœŸåœ°</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥15,999.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop&crop=center" alt="Virtual Building" class="product-image">
                                <span class="product-badge bg-cyan-500">å»ºç­‘</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">æœªæ¥ä¸»ä¹‰å•†åœº</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥8,888.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.6</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1511467687858-23d96c32e4ae?w=300&h=200&fit=crop&crop=center" alt="Avatar" class="product-image">
                                <span class="product-badge bg-violet-500">å½¢è±¡</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">èµ›åšæœ‹å…‹è™šæ‹Ÿå½¢è±¡</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥1,299.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1634712282287-14ed57b9cc89?w=300&h=200&fit=crop&crop=center" alt="Wearables" class="product-image">
                                <span class="product-badge bg-rose-500">æœé¥°</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">é™é‡ç‰ˆæ•°å­—æ—¶è£…</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥599.99</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.7</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1614294148960-9aa740632a87?w=300&h=200&fit=crop&crop=center" alt="Experience" class="product-image">
                                <span class="product-badge bg-amber-500">ä½“éªŒ</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">è™šæ‹ŸéŸ³ä¹ä¼šé—¨ç¥¨</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥299.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ•°å­—å†…å®¹åˆ†ç±»å¡ç‰‡ -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-info">
                            <span class="category-icon">ğŸ“±</span>
                            <div class="category-text">
                                <h3 class="category-title"><span data-en="Digital Content">æ•°å­—å†…å®¹</span></h3>
                                <span class="category-count"><span data-en="5,432 items">5,432</span></span>
                            </div>
                        </div>
                        <button class="category-view-more" onclick="selectMainCategory('content')">
                            <span data-en="View More">æŸ¥çœ‹æ›´å¤š</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <!-- æ•°å­—å†…å®¹å•†å“ç½‘æ ¼ -->
                    <div class="products-grid">
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300&h=200&fit=crop&crop=center" alt="Music" class="product-image">
                                <span class="product-badge bg-pink-500">éŸ³ä¹</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">ç‹¬å®¶ç”µå­éŸ³ä¹ä¸“è¾‘</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥99.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1536240478700-b869070f9279?w=300&h=200&fit=crop&crop=center" alt="Video" class="product-image">
                                <span class="product-badge bg-red-500">è§†é¢‘</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">åŒºå—é“¾æŠ€æœ¯æ•™ç¨‹</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥299.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop&crop=center" alt="E-book" class="product-image">
                                <span class="product-badge bg-indigo-500">ç”µå­ä¹¦</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">Web3æŠ•èµ„æŒ‡å—</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥89.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.7</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mini-product-card">
                            <div class="product-image-wrapper">
                                <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=300&h=200&fit=crop&crop=center" alt="Course" class="product-image">
                                <span class="product-badge bg-green-500">è¯¾ç¨‹</span>
                            </div>
                            <div class="product-info">
                                <h4 class="product-title">NFTåˆ›ä½œå®Œæ•´è¯¾ç¨‹</h4>
                                <div class="product-footer">
                                    <span class="product-price">Â¥599.00</span>
                                    <div class="product-rating">
                                        <i class="fas fa-star star"></i>
                                        <span>4.9</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å…¶ä»–åˆ†ç±»å¡ç‰‡å¯ä»¥ç±»ä¼¼æ·»åŠ ... -->
                
            </div>

            <!-- å•ä¸ªåˆ†ç±»è¯¦ç»†è§†å›¾ - é»˜è®¤éšè— -->
            <div id="singleCategoryView" class="hidden">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <button onclick="selectMainCategory('all')" class="mr-4 p-2 hover:bg-gray-700 rounded-lg transition-colors">
                            <i class="fas fa-arrow-left text-gray-400"></i>
                        </button>
                        <div>
                            <h2 class="text-xl font-semibold text-white" id="categoryTitle">æ¸¸æˆé“å…·</h2>
                            <p class="text-sm text-gray-400" id="categoryCount">å…±8,567ä»¶å•†å“</p>
                        </div>
                    </div>
                    <select id="sortOptions" class="border border-gray-600 bg-gray-700/50 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500">
                        <option value="newest">æœ€æ–°ä¸Šæ¶</option>
                        <option value="price-low">ä»·æ ¼ä»ä½åˆ°é«˜</option>
                        <option value="price-high">ä»·æ ¼ä»é«˜åˆ°ä½</option>
                        <option value="rating">è¯„åˆ†æœ€é«˜</option>
                        <option value="popular">è¯„ä»·æœ€å¤š</option>
                    </select>
                </div>

                <!-- å•ä¸ªåˆ†ç±»çš„å•†å“ç½‘æ ¼ -->
                <div id="singleCategoryProducts" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                    <!-- è¿™é‡Œå°†åŠ¨æ€åŠ è½½é€‰ä¸­åˆ†ç±»çš„å•†å“ -->
                </div>

                <!-- åˆ†é¡µ -->
                <div class="flex justify-center mt-12 mb-8">
                    <nav class="flex items-center space-x-2 filter-section rounded-xl p-2">
                        <button class="px-4 py-2 bg-gray-600/50 hover:bg-gray-500/50 text-gray-300 hover:text-white rounded-lg transition-colors">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg font-medium">1</button>
                        <button class="px-4 py-2 bg-gray-600/50 hover:bg-gray-500/50 text-gray-300 hover:text-white rounded-lg transition-colors">2</button>
                        <button class="px-4 py-2 bg-gray-600/50 hover:bg-gray-500/50 text-gray-300 hover:text-white rounded-lg transition-colors">3</button>
                        <span class="px-4 py-2 text-gray-500">...</span>
                        <button class="px-4 py-2 bg-gray-600/50 hover:bg-gray-500/50 text-gray-300 hover:text-white rounded-lg transition-colors">10</button>
                        <button class="px-4 py-2 bg-gray-600/50 hover:bg-gray-500/50 text-gray-300 hover:text-white rounded-lg transition-colors">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCategory = 'all';
        let currentSubcategory = null;

        // æœç´¢åŠŸèƒ½
        function performSearch() {
            const searchInput = document.getElementById('productSearchInput');
            const searchTerm = searchInput.value.trim();
            
            if (searchTerm) {
                console.log('æœç´¢å•†å“:', searchTerm);
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æœç´¢é€»è¾‘
                showToast(`æ­£åœ¨æœç´¢ "${searchTerm}"...`, 'info');
                
                // æ¨¡æ‹Ÿæœç´¢ç»“æœ
                setTimeout(() => {
                    showToast(`æ‰¾åˆ° ${Math.floor(Math.random() * 100) + 10} ä¸ªç›¸å…³å•†å“`, 'success');
                }, 1000);
            } else {
                showToast('è¯·è¾“å…¥æœç´¢å…³é”®è¯', 'warning');
            }
        }

        // åˆ†ç±»é€‰æ‹©åŠŸèƒ½ - æ¢å¤åŸæœ‰é€»è¾‘
        function selectCategory(category) {
            currentCategory = category;
            currentSubcategory = null;
            
            // æ›´æ–°åˆ†ç±»æ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.category === category) {
                    tab.classList.add('active');
                }
            });

            // æ˜¾ç¤ºå¯¹åº”çš„è§†å›¾
            if (category === 'all') {
                document.getElementById('allCategoriesView').classList.remove('hidden');
                document.getElementById('singleCategoryView').classList.add('hidden');
            } else {
                document.getElementById('allCategoriesView').classList.add('hidden');
                document.getElementById('singleCategoryView').classList.remove('hidden');
                loadCategoryProducts(category);
            }
            
            console.log('é€‰æ‹©åˆ†ç±»:', category);
            showToast(`å·²åˆ‡æ¢åˆ° ${getCategoryName(category)}`, 'info');
        }

        // ä¸»åˆ†ç±»é€‰æ‹©åŠŸèƒ½ - å…¼å®¹æ–°çš„ä¸»åˆ†ç±»æŒ‰é’®
        function selectMainCategory(category) {
            // è°ƒç”¨åŸæœ‰çš„selectCategoryå‡½æ•°ä¿æŒä¸€è‡´æ€§
            selectCategory(category);
        }

        // è·å–åˆ†ç±»åç§°
        function getCategoryName(category) {
            const categoryNames = {
                'all': 'å…¨éƒ¨åˆ†ç±»',
                'gaming': 'æ¸¸æˆé“å…·',
                'art': 'æ•°å­—è‰ºæœ¯',
                'metaverse': 'è™šæ‹Ÿä¸–ç•Œ',
                'content': 'æ•°å­—å†…å®¹',
                'collectibles': 'æ”¶è—å“',
                'services': 'æœåŠ¡',
                'tools': 'å·¥å…·',
                'education': 'æ•™è‚²'
            };
            return categoryNames[category] || category;
        }

        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white transition-all duration-300 transform translate-x-full`;
            
            switch(type) {
                case 'success':
                    toast.classList.add('bg-green-600');
                    break;
                case 'warning':
                    toast.classList.add('bg-yellow-600');
                    break;
                case 'error':
                    toast.classList.add('bg-red-600');
                    break;
                default:
                    toast.classList.add('bg-blue-600');
            }
            
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.remove('translate-x-full'), 100);
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // ä¸‹æ‹‰èœå•åˆ‡æ¢
        function toggleDropdown(category) {
            const dropdown = document.getElementById(`${category}-dropdown`);
            const arrow = document.getElementById(`${category}-arrow`);
            
            // å…³é—­å…¶ä»–æ‰€æœ‰ä¸‹æ‹‰èœå•
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                if (menu.id !== `${category}-dropdown`) {
                    menu.classList.remove('show');
                }
            });
            
            // é‡ç½®å…¶ä»–ç®­å¤´
            document.querySelectorAll('[id$="-arrow"]').forEach(arr => {
                if (arr.id !== `${category}-arrow`) {
                    arr.style.transform = 'rotate(0deg)';
                }
            });
            
            // åˆ‡æ¢å½“å‰ä¸‹æ‹‰èœå•
            if (dropdown.classList.contains('show')) {
                dropdown.classList.remove('show');
                arrow.style.transform = 'rotate(0deg)';
            } else {
                dropdown.classList.add('show');
                arrow.style.transform = 'rotate(180deg)';
                // ä¹Ÿé€‰æ‹©è¿™ä¸ªåˆ†ç±»
                selectCategory(category);
            }
        }

        // é€‰æ‹©å­åˆ†ç±»
        function selectSubcategory(category, subcategory) {
            selectCategory(category);
            currentSubcategory = subcategory;
            
            // å…³é—­ä¸‹æ‹‰èœå•
            const dropdown = document.getElementById(`${category}-dropdown`);
            const arrow = document.getElementById(`${category}-arrow`);
            dropdown.classList.remove('show');
            arrow.style.transform = 'rotate(0deg)';
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ å­åˆ†ç±»ç­›é€‰é€»è¾‘
            console.log(`Selected subcategory: ${category} > ${subcategory}`);
        }

        // æŠ˜å å±•å¼€åˆ†ç±»
        function toggleMoreCategories() {
            const hiddenItems = document.getElementById('categoryHidden');
            const toggleText = document.getElementById('categoryToggleText');
            const toggleArrow = document.getElementById('categoryToggleArrow');
            
            if (hiddenItems.classList.contains('show')) {
                hiddenItems.classList.remove('show');
                toggleText.textContent = 'æ›´å¤š';
                toggleArrow.style.transform = 'rotate(0deg)';
            } else {
                hiddenItems.classList.add('show');
                toggleText.textContent = 'æ”¶èµ·';
                toggleArrow.style.transform = 'rotate(180deg)';
            }
        }

        // æŠ˜å å±•å¼€ä»·æ ¼ç­›é€‰
        function toggleMorePrices() {
            const hiddenItems = document.getElementById('priceHidden');
            const toggleText = document.getElementById('priceToggleText');
            const toggleArrow = document.getElementById('priceToggleArrow');
            
            if (hiddenItems.classList.contains('show')) {
                hiddenItems.classList.remove('show');
                toggleText.textContent = 'æ›´å¤š';
                toggleArrow.style.transform = 'rotate(0deg)';
            } else {
                hiddenItems.classList.add('show');
                toggleText.textContent = 'æ”¶èµ·';
                toggleArrow.style.transform = 'rotate(180deg)';
            }
        }

        // æŠ˜å å±•å¼€ç­›é€‰é€‰é¡¹
        function toggleMoreFilters() {
            const hiddenItems = document.getElementById('filterHidden');
            const toggleText = document.getElementById('filterToggleText');
            const toggleArrow = document.getElementById('filterToggleArrow');
            
            if (hiddenItems.classList.contains('show')) {
                hiddenItems.classList.remove('show');
                toggleText.textContent = 'æ›´å¤š';
                toggleArrow.style.transform = 'rotate(0deg)';
            } else {
                hiddenItems.classList.add('show');
                toggleText.textContent = 'æ”¶èµ·';
                toggleArrow.style.transform = 'rotate(180deg)';
            }
        }

        // æ£€æµ‹æ˜¯å¦éœ€è¦æ˜¾ç¤º"æ›´å¤š"æŒ‰é’® - ä¿®å¤æ”¯æŒæ¢è¡Œçš„æ£€æµ‹
        function checkOverflow() {
            const filterConfigs = [
                {
                    containerId: 'categoryContainer',
                    visibleId: 'categoryVisible', 
                    hiddenId: 'categoryHidden',
                    toggleBtnId: 'categoryToggleBtn'
                },
                {
                    containerId: 'priceContainer',
                    visibleId: 'priceVisible',
                    hiddenId: 'priceHidden',
                    toggleBtnId: 'priceToggleBtn'
                },
                {
                    containerId: 'filterContainer', 
                    visibleId: 'filterVisible',
                    hiddenId: 'filterHidden',
                    toggleBtnId: 'filterToggleBtn'
                }
            ];

            filterConfigs.forEach(config => {
                const container = document.getElementById(config.containerId);
                const visible = document.getElementById(config.visibleId);
                const hidden = document.getElementById(config.hiddenId);
                const toggleBtn = document.getElementById(config.toggleBtnId);
                
                if (container && visible && hidden && toggleBtn) {
                    // æ£€æŸ¥éšè—åŒºåŸŸæ˜¯å¦æœ‰å†…å®¹ AND å¯è§åŒºåŸŸæ˜¯å¦çœŸçš„è¶…è¿‡ä¸€è¡Œ
                    const hiddenItems = hidden.children;
                    const visibleItems = visible.children;
                    
                    let shouldShow = false;
                    
                    // åªæœ‰åˆ†ç±»åŒºåŸŸæ‰æ£€æŸ¥éšè—å†…å®¹ï¼ˆå› ä¸ºæˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®äº†éšè—å†…å®¹ï¼‰
                    if (config.toggleBtnId === 'categoryToggleBtn') {
                        shouldShow = hiddenItems.length > 0;
                    } else {
                        // å¯¹äºä»·æ ¼å’Œç­›é€‰ï¼Œæ£€æŸ¥å¯è§å†…å®¹æ˜¯å¦çœŸçš„è¶…è¿‡ä¸€è¡Œ
                        if (visibleItems.length > 0) {
                            const firstItemTop = visibleItems[0].offsetTop;
                            for (let i = 1; i < visibleItems.length; i++) {
                                if (visibleItems[i].offsetTop > firstItemTop + 5) { // 5pxå®¹å·®
                                    shouldShow = true;
                                    break;
                                }
                            }
                        }
                    }
                    
                    // å¦‚æœéœ€è¦æ˜¾ç¤º"æ›´å¤š"æŒ‰é’®
                    if (shouldShow) {
                        toggleBtn.classList.add('show');
                        toggleBtn.style.display = 'flex';
                        console.log(`æ˜¾ç¤ºæ›´å¤šæŒ‰é’®: ${config.toggleBtnId}`);
                    } else {
                        toggleBtn.classList.remove('show');
                        toggleBtn.style.display = 'none';
                        console.log(`éšè—æ›´å¤šæŒ‰é’®: ${config.toggleBtnId}`);
                    }
                }
            });
        }

        // ä¼˜åŒ–çš„æº¢å‡ºæ£€æµ‹
        function initializeOverflowDetection() {
            console.log('å¼€å§‹åˆå§‹åŒ–æº¢å‡ºæ£€æµ‹...');
            
            // åˆå§‹æ£€æµ‹
            setTimeout(() => {
                console.log('æ‰§è¡Œåˆå§‹æº¢å‡ºæ£€æµ‹');
                checkOverflow();
            }, 200);
            
            // çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°æ£€æµ‹
            window.addEventListener('resize', function() {
                clearTimeout(window.overflowCheckTimeout);
                window.overflowCheckTimeout = setTimeout(() => {
                    console.log('çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°æ£€æµ‹æº¢å‡º');
                    checkOverflow();
                }, 150);
            });
            
            // ç›‘å¬å­—ä½“åŠ è½½å®Œæˆ
            if (document.fonts) {
                document.fonts.ready.then(function() {
                    console.log('å­—ä½“åŠ è½½å®Œæˆï¼Œé‡æ–°æ£€æµ‹æº¢å‡º');
                    setTimeout(checkOverflow, 100);
                });
            }
        }

        // åŠ è½½å•ä¸ªåˆ†ç±»çš„å•†å“
        function loadCategoryProducts(category) {
            const categoryInfo = {
                'gaming': { title: 'æ¸¸æˆé“å…·', count: '8,567' },
                'art': { title: 'æ•°å­—è‰ºæœ¯', count: '3,421' },
                'metaverse': { title: 'è™šæ‹Ÿä¸–ç•Œ', count: '2,156' },
                'content': { title: 'æ•°å­—å†…å®¹', count: '5,432' },
                'collectibles': { title: 'æ”¶è—å“', count: '1,987' }
            };

            const info = categoryInfo[category];
            if (info) {
                document.getElementById('categoryTitle').textContent = info.title;
                document.getElementById('categoryCount').textContent = `å…±${info.count}ä»¶å•†å“`;
            }

            // è¿™é‡Œå¯ä»¥æ ¹æ®åˆ†ç±»åŠ è½½å¯¹åº”çš„å•†å“æ•°æ®
            // æš‚æ—¶æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®
            loadSampleProducts(category);
        }

        // åŠ è½½ç¤ºä¾‹å•†å“æ•°æ®
        function loadSampleProducts(category) {
            const container = document.getElementById('singleCategoryProducts');
            
            // è¿™é‡Œå¯ä»¥æ ¹æ®ä¸åŒåˆ†ç±»åŠ è½½ä¸åŒçš„å•†å“
            // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
            container.innerHTML = `
                <!-- è¿™é‡Œå°†æ˜¾ç¤º${category}åˆ†ç±»çš„å•†å“åˆ—è¡¨ -->
                <div class="product-card rounded-2xl shadow-lg overflow-hidden border border-gray-600">
                    <div class="relative bg-gray-800">
                        <img src="https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400&h=300&fit=crop" alt="Product" class="w-full h-48 object-cover">
                        <div class="absolute top-3 left-3">
                            <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-xs font-medium">ä¼ è¯´</span>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-white font-semibold text-base mb-2">ç¤ºä¾‹å•†å“ - ${category}</h3>
                        <p class="text-gray-400 text-sm mb-3">è¿™æ˜¯${category}åˆ†ç±»ä¸‹çš„ç¤ºä¾‹å•†å“æè¿°</p>
                        <div class="flex items-center justify-between">
                            <span class="text-blue-400 font-bold text-lg">Â¥299.99</span>
                            <button class="modern-btn text-white px-4 py-2 rounded-lg text-sm font-medium">ç«‹å³è´­ä¹°</button>
                        </div>
                    </div>
                </div>
            `.repeat(10); // é‡å¤10æ¬¡ä½œä¸ºç¤ºä¾‹
        }

        // æ¸…é™¤æ‰€æœ‰ç­›é€‰
        function clearAllFilters() {
            // æ¸…é™¤æ‰€æœ‰ç­›é€‰æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.price-tag, .status-badge').forEach(button => {
                button.classList.remove('active');
            });

            const searchInput = document.getElementById('productSearchInput');
            if (searchInput) searchInput.value = '';
            
            // å…³é—­æ‰€æœ‰ä¸‹æ‹‰èœå•
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.remove('show');
            });
            
            // é‡ç½®æ‰€æœ‰ç®­å¤´
            document.querySelectorAll('[id$="-arrow"]').forEach(arrow => {
                arrow.style.transform = 'rotate(0deg)';
            });
            
            // å…³é—­æ‰€æœ‰æŠ˜å é¡¹
            document.querySelectorAll('.filter-items-hidden').forEach(hidden => {
                hidden.classList.remove('show');
            });
            
            // é‡ç½®æ‰€æœ‰"æ›´å¤š"æŒ‰é’®æ–‡æœ¬å’Œç®­å¤´
            const categoryToggleText = document.getElementById('categoryToggleText');
            const categoryToggleArrow = document.getElementById('categoryToggleArrow');
            const priceToggleText = document.getElementById('priceToggleText');
            const priceToggleArrow = document.getElementById('priceToggleArrow');
            const filterToggleText = document.getElementById('filterToggleText');
            const filterToggleArrow = document.getElementById('filterToggleArrow');
            
            if (categoryToggleText) categoryToggleText.textContent = 'æ›´å¤š';
            if (categoryToggleArrow) categoryToggleArrow.style.transform = 'rotate(0deg)';
            if (priceToggleText) priceToggleText.textContent = 'æ›´å¤š';
            if (priceToggleArrow) priceToggleArrow.style.transform = 'rotate(0deg)';
            if (filterToggleText) filterToggleText.textContent = 'æ›´å¤š';
            if (filterToggleArrow) filterToggleArrow.style.transform = 'rotate(0deg)';
            
            // å›åˆ°å…¨éƒ¨åˆ†ç±»è§†å›¾
            selectCategory('all');
            
            showToast('å·²æ¸…é™¤æ‰€æœ‰ç­›é€‰æ¡ä»¶', 'info');
        }

        // æ‰‹åŠ¨æµ‹è¯•æ›´å¤šæŒ‰é’®åŠŸèƒ½
        function testMoreButtons() {
            console.log('æ‰‹åŠ¨æµ‹è¯•æ›´å¤šæŒ‰é’®åŠŸèƒ½...');
            
            // å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰æ›´å¤šæŒ‰é’®ç”¨äºæµ‹è¯•
            const toggleButtons = ['categoryToggleBtn', 'priceToggleBtn', 'filterToggleBtn'];
            toggleButtons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.style.display = 'flex';
                    btn.classList.add('show');
                    console.log(`å¼ºåˆ¶æ˜¾ç¤ºæŒ‰é’®: ${btnId}`);
                } else {
                    console.error(`æŒ‰é’®ä¸å­˜åœ¨: ${btnId}`);
                }
            });
        }

        // å•†å“ç‚¹å‡»äº‹ä»¶
        function openProductDetail(title, imageUrl, price, rarity, description, rating, reviewCount, category) {
            if (window.parent && window.parent.openProductDetail) {
                window.parent.openProductDetail(title, imageUrl, price, rarity, description, rating, reviewCount, category);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMå†…å®¹åŠ è½½å®Œæˆ');
            
            // æ£€æŸ¥å¿…è¦çš„DOMå…ƒç´ æ˜¯å¦å­˜åœ¨
            const requiredElements = [
                'categoryContainer', 'categoryVisible', 'categoryHidden', 'categoryToggleBtn',
                'priceContainer', 'priceVisible', 'priceHidden', 'priceToggleBtn',
                'filterContainer', 'filterVisible', 'filterHidden', 'filterToggleBtn'
            ];
            
            const missingElements = [];
            requiredElements.forEach(id => {
                const element = document.getElementById(id);
                if (!element) {
                    missingElements.push(id);
                }
            });
            
            if (missingElements.length > 0) {
                console.error('ç¼ºå°‘å¿…è¦çš„DOMå…ƒç´ :', missingElements);
            } else {
                console.log('æ‰€æœ‰å¿…è¦çš„DOMå…ƒç´ éƒ½å­˜åœ¨');
            }
            
            // åˆå§‹åŒ–æº¢å‡ºæ£€æµ‹
            initializeOverflowDetection();
            
            // ä¸ºåˆ†ç±»æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬ - å•é€‰
            const categoryButtons = document.querySelectorAll('.category-tab');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.dataset.category;
                    if (category) {
                        selectCategory(category);
                    }
                });
            });
            
            // ä¸ºä»·æ ¼å’ŒçŠ¶æ€ç­›é€‰æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬ - å¤šé€‰
            const multiSelectButtons = document.querySelectorAll('.price-tag, .status-badge');
            multiSelectButtons.forEach(button => {
                button.addEventListener('click', function() {
                    toggleMultiSelectFilter(this);
                });
            });

            // ä¿ç•™æ—§çš„ç­›é€‰æŒ‰é’®äº‹ä»¶ç›‘å¬ - å•é€‰ï¼ˆä½œä¸ºåå¤‡ï¼‰
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filterType = this.dataset.filterType;
                    document.querySelectorAll(`.filter-btn[data-filter-type="${filterType}"]`).forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // æœç´¢åŠŸèƒ½
            const originalSearchInput = document.getElementById('marketplaceSearch');
            if (originalSearchInput) {
                originalSearchInput.addEventListener('input', function() {
                    // è¿™é‡Œå¯ä»¥æ·»åŠ æœç´¢é€»è¾‘
                    console.log('Searching for:', this.value);
                });
            }

            // å¤šè¯­è¨€æ”¯æŒ
            if (window.parent && window.parent.postMessage) {
                window.addEventListener('message', function(event) {
                    if (event.data.type === 'languageChange') {
                        const newLang = event.data.language;
                        switchLanguage(newLang);
                    }
                });
            }

            // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.category-dropdown')) {
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        menu.classList.remove('show');
                    });
                    document.querySelectorAll('[id$="-arrow"]').forEach(arrow => {
                        arrow.style.transform = 'rotate(0deg)';
                    });
                }
            });
            
            // æ·»åŠ hoverè°ƒè¯•
            document.querySelectorAll('.category-dropdown').forEach(dropdown => {
                dropdown.addEventListener('mouseenter', function() {
                    const menu = this.querySelector('.dropdown-menu');
                    if (menu) {
                        console.log('é¼ æ ‡è¿›å…¥åˆ†ç±»:', this.querySelector('.category-tab').textContent.trim());
                    }
                });
            });

            // ä¸ºæœç´¢æ¡†æ·»åŠ å›è½¦é”®æ”¯æŒ
            const productSearchInputElement = document.getElementById('productSearchInput');
            if (productSearchInputElement) {
                productSearchInputElement.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
        });

        // å¤šé€‰ç­›é€‰åŠŸèƒ½ - æ–°å¢
        function toggleMultiSelectFilter(button) {
            const filterType = button.dataset.filterType;
            const value = button.dataset.value;
            
            // åˆ‡æ¢æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€
            button.classList.toggle('active');
            
            // è·å–å½“å‰é€‰ä¸­çš„ç­›é€‰é¡¹
            const activeFilters = getActiveFilters(filterType);
            
            console.log(`${filterType} å½“å‰é€‰æ‹©:`, activeFilters);
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ ç­›é€‰é€»è¾‘
            applyFilters();
        }
        
        // è·å–æŒ‡å®šç±»å‹çš„æ´»è·ƒç­›é€‰é¡¹
        function getActiveFilters(filterType) {
            const activeButtons = document.querySelectorAll(`[data-filter-type="${filterType}"].active`);
            return Array.from(activeButtons).map(btn => btn.dataset.value);
        }
        
        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            const priceFilters = getActiveFilters('price');
            const ratingFilters = getActiveFilters('rating'); 
            const statusFilters = getActiveFilters('status');
            
            console.log('åº”ç”¨ç­›é€‰:', {
                category: currentCategory,
                subcategory: currentSubcategory,
                prices: priceFilters,
                ratings: ratingFilters,
                statuses: statusFilters
            });
            
            // è¿™é‡Œå¯ä»¥å®ç°å®é™…çš„ç­›é€‰é€»è¾‘
            showToast('ç­›é€‰æ¡ä»¶å·²æ›´æ–°', 'info');
        }
    </script>
</body>
</html> 